<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EVEX â€” BCA Expertise Â· Tableau de bord</title>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
<div class="app-layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-brand">BCA Expertise</div>
      <div class="logo-app">EVEX</div>
      <div class="logo-sub">Ã‰vÃ©nements Exceptionnels</div>
    </div>

    <div class="sidebar-event">
      <div class="ev-label">Ã‰vÃ©nement actif</div>
      <div class="ev-code">5G1</div>
      <div class="ev-name">GrÃªle Anglet â€” Juin 2025</div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-section">Navigation</div>

      <div class="nav-item" data-nav="dashboard" onclick="window.location.href='dashboard.html'">
        <span class="nav-icon">ğŸš—</span>
        Parc de vÃ©hicules
        <span class="nav-badge badge-todo">â€”</span>
      </div>

      <div class="nav-item admin-only" style="display:none" data-nav="admin" onclick="window.location.href='admin.html'">
        <span class="nav-icon">ğŸ“Š</span>
        Administration
      </div>

      <div class="nav-section">En temps rÃ©el</div>

      <div class="nav-item">
        <span class="nav-icon">ğŸ”’</span>
        En cours
        <span class="nav-badge badge-active-nav" style="background:var(--status-active)">â€”</span>
      </div>

      <div class="nav-item">
        <span class="nav-icon">âœ…</span>
        TraitÃ©s
      </div>
    </nav>

    <div class="sidebar-user">
      <div class="user-avatar">?</div>
      <div class="user-info">
        <div class="user-name">â€”</div>
        <div class="user-role">â€”</div>
      </div>
      <button class="user-logout" title="DÃ©connexion">â‡¥</button>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main-content">
    <div class="topbar">
      <div>
        <div class="topbar-title">Parc de vÃ©hicules</div>
      </div>

      <!-- Progress -->
      <div style="display:flex;align-items:center;gap:10px;margin:0 auto">
        <span style="font-size:11px;color:var(--text-muted)">Avancement</span>
        <div style="width:160px">
          <div class="progress-bar-wrap">
            <div class="progress-bar" style="width:0%"></div>
          </div>
        </div>
        <span class="progress-pct" style="font-size:12px;font-weight:700;color:var(--bca-blue)">0%</span>
      </div>

      <button class="btn btn-primary" id="add-vehicle-btn">
        ï¼‹ Ajouter un vÃ©hicule
      </button>
    </div>

    <div class="page-content">

      <!-- Stat Cards -->
      <div class="stat-grid">
        <div class="stat-card s-none">
          <div class="stat-label">Pas encore vus</div>
          <div class="stat-value" data-stat="none">â€”</div>
          <div class="stat-sub">disponibles</div>
        </div>
        <div class="stat-card s-active">
          <div class="stat-label">En cours</div>
          <div class="stat-value" data-stat="active">â€”</div>
          <div class="stat-sub">expertises en cours</div>
        </div>
        <div class="stat-card s-grele">
          <div class="stat-label">GrÃªlÃ©s</div>
          <div class="stat-value" data-stat="grele">â€”</div>
          <div class="stat-sub">expertises terminÃ©es</div>
        </div>
        <div class="stat-card s-non">
          <div class="stat-label">Non grÃªlÃ©s</div>
          <div class="stat-value" data-stat="non">â€”</div>
          <div class="stat-sub">expertises terminÃ©es</div>
        </div>
      </div>

      <!-- Filter Bar -->
      <div class="filter-bar">
        <div class="search-input-wrap">
          <span class="search-icon">ğŸ”</span>
          <input type="text" class="search-input" placeholder="Rechercher par immat, VIN, marque...">
        </div>

        <div class="filter-divider"></div>

        <select class="filter-select" id="status-filter">
          <option value="all">Tous les statuts</option>
          <option value="none">âšª Pas encore vus</option>
          <option value="active">ğŸŸ¡ En cours</option>
          <option value="grele">ğŸŸ¢ GrÃªlÃ©s</option>
          <option value="non">ğŸ”´ Non grÃªlÃ©s</option>
        </select>

        <div class="filter-divider"></div>

        <div class="status-legend">
          <div class="legend-item" data-filter="none" title="Filtrer">
            <div class="legend-dot ld-none"></div> Pas encore vu
          </div>
          <div class="legend-item" data-filter="active">
            <div class="legend-dot ld-active"></div> En cours
          </div>
          <div class="legend-item" data-filter="grele">
            <div class="legend-dot ld-grele"></div> GrÃªlÃ©
          </div>
          <div class="legend-item" data-filter="non">
            <div class="legend-dot ld-non"></div> Non grÃªlÃ©
          </div>
        </div>

        <div class="filter-divider"></div>
        <span class="results-count">â€” vÃ©hicules</span>
      </div>

      <!-- Vehicle Table -->
      <div class="vehicle-table-wrap">
        <table class="vehicle-table">
          <thead>
            <tr>
              <th style="width:4px;padding:0"></th>
              <th>NÂ°</th>
              <th class="sortable">IMMATRICULATION / VIN</th>
              <th class="sortable">MARQUE</th>
              <th class="sortable">MODÃˆLE</th>
              <th>1ÃˆRE MEC</th>
              <th>STATUT</th>
              <th style="text-align:right">ACTIONS</th>
            </tr>
          </thead>
          <tbody id="vehicle-tbody">
            <tr><td colspan="8">
              <div class="empty-state">
                <div class="empty-state-icon">â³</div>
                <div class="empty-state-text">Chargement...</div>
              </div>
            </td></tr>
          </tbody>
        </table>

        <div class="pagination">
          <span class="page-info"></span>
          <div class="page-btns"></div>
        </div>
      </div>

    </div><!-- /page-content -->
  </main>
</div>

<!-- ADD VEHICLE MODAL -->
<div id="add-vehicle-modal" class="modal-overlay" style="display:none" onclick="if(event.target===this)closeAddModal()">
  <div class="modal">
    <div class="modal-header">
      <span style="font-size:20px">ğŸš—</span>
      <div class="modal-title">Ajouter un vÃ©hicule</div>
      <button class="modal-close" onclick="closeAddModal()">Ã—</button>
    </div>
    <div class="modal-body">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:14px">
        <div class="form-group">
          <label class="form-label">Immatriculation *</label>
          <input type="text" id="new-immat" class="form-control" placeholder="ex: AB123CD" style="text-transform:uppercase">
        </div>
        <div class="form-group">
          <label class="form-label">NÂ° de sÃ©rie (VIN)</label>
          <input type="text" id="new-vin" class="form-control" placeholder="17 caractÃ¨res" maxlength="17">
        </div>
        <div class="form-group">
          <label class="form-label">Marque *</label>
          <input type="text" id="new-marque" class="form-control" placeholder="ex: JEEP">
        </div>
        <div class="form-group">
          <label class="form-label">ModÃ¨le *</label>
          <input type="text" id="new-modele" class="form-control" placeholder="ex: RENEGADE">
        </div>
        <div class="form-group">
          <label class="form-label">1Ã¨re MEC</label>
          <input type="text" id="new-mec" class="form-control" placeholder="JJ/MM/AAAA">
        </div>
        <div class="form-group">
          <label class="form-label">KilomÃ©trage</label>
          <input type="number" id="new-km" class="form-control" placeholder="ex: 45000">
        </div>
        <div class="form-group" style="grid-column:1/-1">
          <label class="form-label">Conditions d'utilisation</label>
          <select id="new-usage" class="form-control">
            <option>VÃ©h confiÃ©</option>
            <option>VÃ©h appartenant</option>
            <option>VÃ©h courtoisie</option>
            <option>VÃ©h location</option>
          </select>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeAddModal()">Annuler</button>
      <button class="btn btn-primary" onclick="submitAddVehicle()">âœ… Ajouter au parc</button>
    </div>
  </div>
</div>

<div class="toast-container"></div>

<script src="js/data.js"></script>
<script src="js/auth.js"></script>
<script src="js/dashboard.js"></script>
</body>
</html>
